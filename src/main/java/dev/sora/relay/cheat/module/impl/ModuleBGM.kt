package dev.sora.relay.cheat.module.impl

import dev.sora.relay.cheat.module.CheatModule
import dev.sora.relay.game.event.EventTick
import dev.sora.relay.game.event.Listen
import dev.sora.relay.game.utils.NoteBlockUtils
import org.cloudburstmc.protocol.bedrock.data.SoundEvent
import org.cloudburstmc.protocol.bedrock.packet.LevelSoundEventPacket
import java.io.ByteArrayInputStream
import java.util.*

class ModuleBGM : CheatModule("BGM") {

    private val song = NoteBlockUtils.Song().apply {
        readNbs(ByteArrayInputStream(Base64.getDecoder().decode("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ZAAAAQAAEmRkAAAAAAIAAQAALmRkAAABAAAZZGQAAAAAAgABAAA2ZGQAAAEAACJkZAAAAAACAAEAAC5kZAAAAQAAGWRkAAAAAAIAAQAAOGRkAAABAAANZGQAAAAAAgABAAA2ZGQAAAEAACBkZAAAAAACAAEAADNkZAAAAQAAKWRkAAAAAAIAAQAANmRkAAABAAAgZGQAAAAAAgABAAA4ZGQAAAEAABlkZAAAAAACAAEAADFkZAAAAQAAIGRkAAAAAAIAAQAANmRkAAABAAApZGQAAAAAAgABAAAxZGQAAAEAACBkZAAAAAACAAEAADpkZAAAAQAAG2RkAAAAAAIAAQAALmRkAAABAAAiZGQAAAAAAgABAAA2ZGQAAAEAACpkZAAAAAACAAEAAC5kZAAAAQAAImRkAAAAAAIAAQAAOGRkAAABAAAbZGQAAAAAAgABAAAuZGQAAAEAACJkZAAAAAACAAEAADpkZAAAAQAAKmRkAAAAAAIAAQAALmRkAAABAAAiZGQAAAAAAgABAAAvZGQAAAEAABdkZAAAAAACAAEAACpkZAAAAQAAHmRkAAAAAAIAAQAANmRkAAABAAAnZGQAAAAAAgABAAAvZGQAAAEAAB5kZAAAAAACAAEAADNkZAAAAQAAF2RkAAAAAAIAAQAAL2RkAAABAAAeZGQAAAAAAgABAAA2ZGQAAAEAACdkZAAAAAACAAEAADhkZAAAAQAAHmRkAAAAAAIAAQAAOmRkAAABAAASZGQAAAAAAgABAAAxZGQAAAEAABlkZAAAAAACAAEAADZkZAAAAQAAImRkAAAAAAIAAQAAMWRkAAABAAAZZGQAAAAAAgABAAA9ZGQAAAEAABJkZAAAAAACAAEAADFkZAAAAQAAGWRkAAAAAAIAAQAAOmRkAAABAAAiZGQAAAAAAgABAAAxZGQAAAEAABlkZAAAAAACAAEAADhkZAAAAQAADWRkAAAAAAIAAQAANmRkAAABAAAgZGQAAAAAAgABAAA4ZGQAAAEAAClkZAAAAAACAAEAADFkZAAAAQAAIGRkAAAAAAIAAQAAOmRkAAABAAAZZGQAAAAAAgABAAAxZGQAAAEAACBkZAAAAAACAAEAADZkZAAAAQAAKWRkAAAAAAIAAQAAMWRkAAABAAAgZGQAAAAAAgABAAA4ZGQAAAEAABtkZAAAAAACAAEAADZk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ZAAAAAAEAAEAAEZkZAAAAQAAQWRkAAABAAA6ZGQAAAEAACpkZAAAAQAAJ2RkAAABAAAjZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAnZGQAAAEAACpkZAAAAQAAI2RkAAAAAAIAAQAAOGRkAAABAABEZGQAAAEAAD9kZAAAAQAAHmRkAAABAAAjZGQAAAAAAgABAAA6ZGQAAAEAAEZkZAAAAQAAQWRkAAAAAAIAAQAAQmRkAAABAAA9ZGQAAAEAAElkZAAAAQAAKmRkAAABAAAnZGQAAAEAACNkZAAAAAACAAEAADpkZAAAAQAARmRkAAABAAA/ZGQAAAAAAgABAABCZGQAAAEAAD1kZAAAAQAANmRkAAABAAAGZGQAAAEAABJkZAAAAAACAAEAADNkZAAAAQAAP2RkAAABAAA6ZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAqZGQAAAEAACJkZAAAAQAAJWRkAAAAAAIAAQAAOGRkAAABAABEZGQAAAEAAD9kZAAAAQAAImRkAAABAAAqZGQAAAEAACVkZAAAAAACAAEAADZkZAAAAQAAQmRkAAABAAA9ZGQAAAEAACJkZAAAAQAAHmRkAAAAAAIAAQAAM2RkAAABAAA/ZGQAAAEAADpkZAAAAAACAAEAADZkZAAAAQAAQmRkAAABAAA9ZGQAAAEAACpkZAAAAQAAImRkAAABAAAlZGQAAAAAAgABAAAxZGQAAAEAAD1kZAAAAQAAOGRkAAAAAAIAAQAAOGRkAAABAABEZGQAAAEAAD9kZAAAAQAAAWRkAAABAAANZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAAAAAIAAQAAP2RkAAABAAAzZGQAAAEAADhkZAAAAQAAKWRkAAABAAAlZGQAAAEAACBkZAAAAAACAAEAADZkZAAAAQAAQmRkAAABAAA9ZGQAAAEAACBkZAAAAQAAJWRkAAABAAApZGQAAAAAAgABAAA4ZGQAAAEAAERkZAAAAQAAP2RkAAABAAAgZGQAAAEAABlkZAAAAAAEAAEAADZkZAAAAQAAQmRkAAABAAA9ZGQAAAEAACBkZAAAAQAAJWRkAAABAAApZGQAAAAABAABAABGZGQAAAEAADpkZAAAAQAAP2RkAAABAAAPZGQAAAEAAANkZAAAAAAEAAEAADZkZAAAAQAAQmRkAAABAAA6ZGQAAAEAAD9kZAAAAQAAKmRkAAABAAAiZGQAAAEAACdkZAAAAAACAAEAACJkZAAAAQAAJ2RkAAABAAAqZGQAAAAAAgABAAA4ZGQAAAEAAERkZAAAAQAAP2RkAAABAAAiZGQAAAEAABtkZAAAAAAEAAEAADpkZAAAAQAAP2RkAAABAABGZGQAAAEAAEJkZAAAAQAAKmRkAAABAAAnZGQAAAEAACJkZAAAAAAEAAEAAAtkZAAAAQAAF2RkAAAAAAIAAQAAQmRkAAABAAA7ZGQAAAEAADZkZAAAAAACAAEAACpkZAAAAQAAJ2RkAAABAAAjZGQAAAAAAgABAAAnZGQAAAEAACpkZAAAAQAAI2RkAAAAAAIAAQAAM2RkAAABAAA/ZGQAAAEAADZkZAAAAQAAO2RkAAABAAAjZGQAAAEAAB5kZAAAAAAEAAEAADZkZAAAAQAAQmRkAAABAAA7ZGQAAAEAACpkZAAAAQAAJ2RkAAABAAAjZGQAAAAAAgABAAA4ZGQAAAEAAERkZAAAAQAAO2RkAAAAAAIAAQAAOmRkAAABAABGZGQAAAEAAD1kZAAAAQAAQmRkAAABAAAGZGQAAAEAABJkZAAAAAAEAAEAACpkZAAAAQAAImRkAAABAAAlZGQAAAAAAgABAAAiZGQAAAEAACpkZAAAAQAAJWRkAAAAAAIAAQAAQmRkAAABAAA9ZGQAAAEAAElkZAAAAQAARmRkAAABAAAiZGQAAAEAAB5kZAAAAAAEAAEAADpkZAAAAQAAPWRkAAABAABCZGQAAAEAAEZkZAAAAQAAKmRkAAABAAAiZGQAAAEAACVkZAAAAAAEAAEAAERkZAAAAQAAOGRkAAABAAA9ZGQAAAEAAAFkZAAAAQAADWRkAAAAAAIAAQAAQmRkAAABAAA2ZGQAAAEAAD1kZAAAAAACAAEAAERkZAAAAQAAOGRkAAABAAA9ZGQAAAEAAClkZAAAAQAAJWRkAAABAAAgZGQAAAAAAgABAAAgZGQAAAEAACVkZAAAAQAAKWRkAAAAAAIAAQAARmRkAAABAAA6ZGQAAAEAAD1kZAAAAQAAIGRkAAABAAAZZGQAAAAABAABAAAgZGQAAAEAACVkZAAAAQAAKWRkAAAAAAIAAQAAQmRkAAABAAA2ZGQAAAEAAD1kZAAAAAACAAEAAERkZAAAAQAAOGRkAAABAAA/ZGQAAAEAAA9kZAAAAQAAA2RkAAAAAAIAAQAANmRkAAABAAA/ZGQAAAEAAEJkZAAAAAACAAEAADNkZAAAAQAAP2RkAAABAAA6ZGQAAAEAACpkZAAAAQAAImRkAAABAAAnZGQAAAAAAgABAAA2ZGQAAAEAADpkZAAAAQAAP2RkAAABAABCZGQAAAEAACJkZAAAAQAAJ2RkAAABAAAqZGQAAAAAAgABAABEZGQAAAEAADhkZAAAAQAAP2RkAAABAAA6ZGQAAAEAACJkZAAAAQAAG2RkAAAAAAQAAQAANmRkAAABAAA6ZGQAAAEAAD9kZAAAAQAAQmRkAAABAAAqZGQAAAEAACdkZAAAAQAAImRkAAAAAAQAAQAARGRkAAABAAA4ZGQAAAEAAD9kZAAAAQAAC2RkAAABAAAXZGQAAAAABAABAABGZGQAAAEAAEFkZAAAAQAAOmRkAAABAAAqZGQAAAEAACdkZAAAAQAAI2RkAAAAAAIAAQAANmRkAAABAABCZGQAAAEAAD1kZAAAAQAAJ2RkAAABAAAqZGQAAAEAACNkZAAAAAACAAEAADhkZAAAAQAARGRkAAABAAA/ZGQAAAEAAB5kZAAAAQAAI2RkAAAAAAIAAQAAOmRkAAABAABGZGQAAAEAAEFkZAAAAAACAAEAAEJkZAAAAQAAPWRkAAABAABJZGQAAAEAACpkZAAAAQAAJ2RkAAABAAAjZGQAAAAAAgABAAA6ZGQAAAEAAEZkZAAAAQAAP2RkAAAAAAIAAQAAQmRkAAABAAA9ZGQAAAEAADZkZAAAAQAABmRkAAABAAASZGQAAAAAAgABAAAzZGQAAAEAAD9kZAAAAQAAOmRkAAAAAAIAAQAANmRkAAABAABCZGQAAAEAAD1kZAAAAQAAKmRkAAABAAAiZGQAAAEAACVkZAAAAAACAAEAADhkZAAAAQAARGRkAAABAAA/ZGQAAAEAACJkZAAAAQAAKmRkAAABAAAlZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAiZGQAAAEAAB5kZAAAAAACAAEAADNkZAAAAQAAP2RkAAABAAA6ZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAqZGQAAAEAACJkZAAAAQAAJWRkAAAAAAIAAQAAMWRkAAABAAA9ZGQAAAEAADhkZAAAAAACAAEAADhkZAAAAQAARGRkAAABAAA/ZGQAAAEAAAFkZAAAAQAADWRkAAAAAAIAAQAANmRkAAABAABCZGQAAAEAAD1kZAAAAAACAAEAAD9kZAAAAQAAM2RkAAABAAA4ZGQAAAEAAClkZAAAAQAAJWRkAAABAAAgZGQAAAAAAgABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAgZGQAAAEAACVkZAAAAQAAKWRkAAAAAAIAAQAAOGRkAAABAABEZGQAAAEAAD9kZAAAAQAAIGRkAAABAAAZZGQAAAAABAABAAA2ZGQAAAEAAEJkZAAAAQAAPWRkAAABAAAgZGQAAAEAACVkZAAAAQAAKWRkAAAAAAQAAQAAOmRkAAABAAAbZGQAAAAABAABAAA2ZGQAAAEAACJkZAAAAAAEAAEAADhkZAAAAQAAKmRkAAAAAAQAAQAAOmRkAAAAAAQAAQAAI2RkAAAAAAIAAQAANmRkAAAAAAIAAQAAKmRkAAAAAAQAAQAAM2RkAAABAAAvZGQAAAAABAABAAA2ZGQAAAAAAgABAAA4ZGQAAAAAAgABAAA6ZGQAAAEAAB5kZAAAAAAEAAEAACVkZAAAAAAEAAEAAD1kZAAAAQAALmRkAAAAAAQAAQAAOmRkAAAAAAQAAQAAOGRkAAABAAAlZGQAAAAAAgABAAA2ZGQAAAAAAgABAAA4ZGQAAAEAABlkZAAAAAAEAAEAADpkZAAAAQAAIGRkAAAAAAQAAQAAKWRkAAAAAAIAAQAANmRkAAAAAAIAAQAAOGRkAAABAAAbZGQAAAAAAwABAAA2ZGQAAAAAAQABAAAzZGQAAAEAACJkZAAAAAADAAEAADZkZAAAAAABAAEAADhkZAAAAQAAKmRkAAAAAAQAAQAANmRkAAABAAAiZGQAAAAABAABAAA4ZGQAAAEAACNkZAAAAAAEAAEAADpkZAAAAQAAKmRkAAAAAAIAAQAANmRkAAAAAAIAAQAAOGRkAAABAAAvZGQAAAAAAgABAAA6ZGQAAAAAAgABAAA9ZGQAAAEAACpkZAAAAAACAAEAADpkZAAAAAACAAEAADZkZAAAAQAAKmRkAAAAAAIAAQAAM2RkAAAAAAIAAQAANmRkAAABAAAeZGQAAAAAAgABAAA4ZGQAAAAAAgABAAA2ZGQAAAEAACJkZAAAAAACAAEAADNkZAAAAAACAAEAADZkZAAAAQAAJWRkAAAAAAQAAQAAOGRkAAABAAAlZGQAAAAAAgABAAA2ZGQAAAAAAgABAAAzZGQAAAEAABlkZAAAAAACAAEAADZkZAAAAAACAAEAADhkZAAAAQAAIGRkAAAAAAQAAQAANmRkAAABAAAlZGQAAAAABAABAAA6ZGQAAAEAABtkZAAAAAAEAAEAADZkZAAAAQAAImRkAAAAAAQAAQAAOGRkAAABAAAqZGQAAAAABAABAAA6ZGQAAAAABAABAAAjZGQAAAAAAgABAAA2ZGQAAAAAAgABAAAqZGQAAAAABAABAAAzZGQAAAEAAC9kZAAAAAAEAAEAADZkZAAAAAACAAEAADhkZAAAAAACAAEAADpkZAAAAQAAHmRkAAAAAAQAAQAAJWRkAAAAAAQAAQAAPWRkAAABAAAuZGQAAAAABAABAAA6ZGQAAAAABAABAAA4ZGQAAAEAACVkZAAAAAACAAEAADZkZAAAAAACAAEAADhkZAAAAQAAGWRkAAAAAAQAAQAAOmRkAAABAAAgZGQAAAAABAABAAApZGQAAAAAAgABAAA2ZGQAAAAAAgABAAA4ZGQAAAEAABtkZAAAAAADAAEAADZkZAAAAAABAAEAADNkZAAAAQAAImRkAAAAAAMAAQAANmRkAAAAAAEAAQAAOGRkAAABAAAqZGQAAAAABAABAAA2ZGQAAAEAACJkZAAAAAAEAAEAADhkZAAAAQAAI2RkAAAAAAQAAQAAOmRkAAABAAAqZGQAAAAAAgABAAA2ZGQAAAAAAgABAAA4ZGQAAAEAAC9kZAAAAAACAAEAADpkZAAAAAACAAEAAD1kZAAAAQAAKmRkAAAAAAIAAQAAOmRkAAAAAAIAAQAANmRkAAABAAAqZGQAAAAAAgABAAAzZGQAAAAAAgABAAA2ZGQAAAEAAB5kZAAAAAACAAEAADhkZAAAAAACAAEAADZkZAAAAQAAImRkAAAAAAIAAQAAM2RkAAAAAAIAAQAANmRkAAABAAAlZGQAAAAABAABAAA4ZGQAAAEAACVkZAAAAAACAAEAADZkZAAAAAACAAEAADNkZAAAAQAAGWRkAAAAAAIAAQAANmRkAAAAAAIAAQAAOGRkAAABAAAgZGQAAAAABAABAAA2ZGQAAAEAACVkZAAAAAAEAAEAADNkZAAAAQAALmRkAAABAAAPZGQAAAAAAgABAAAuZGQAAAEAADNkZAAAAQAAImRkAAAAAAIAAQAALmRkAAABAAAzZGQAAAEAACpkZAAAAAACAAEAAC5kZAAAAQAAM2RkAAAAAAIAAQAALGRkAAABAAAxZGQAAAEAAA1kZAAAAAACAAEAACBkZAAAAAACAAEAADFkZAAAAQAALGRkAAABAAApZGQAAAAABAABAAApZGQAAAEAAC5kZAAAAQAACmRkAAAAAAIAAQAAHWRkAAAAAAIAAQAALmRkAAABAAApZGQAAAEAACVkZAAAAAAEAAEAACxkZAAAAQAAMWRkAAABAAANZGQAAAAAAgABAAAgZGQAAAAAAgABAAApZGQAAAAAAAALAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQLAAAAR3JhbmQgUGlhbm8AZGQAAAAAAGRkAAAAAABkZAAAAAAAZGQAAAAAAGRkAA")))
        computeMaxTicks()
    }
    private var ticks = 0

    override fun onEnable() {
        ticks = -1
        chat("${song.maxTicks / 20} seconds")
    }

    @Listen
    fun onTick(event: EventTick) {
        if (ticks + 20 > song.maxTicks) {
            ticks = 0
        }
        val notes = song.ticks[ticks++] ?: return
        notes.forEach { note ->
            val pk = LevelSoundEventPacket().apply {
                sound = SoundEvent.NOTE
                position = event.session.thePlayer.vec3Position
                extraData = note.inst.ordinal shl 8 or note.key.toInt()
                identifier = ":"
                isBabySound = false
                isRelativeVolumeDisabled = false
            }
            event.session.sendPacket(pk)
        }
    }

//    @Listen
//    fun onPacketInbound(event: EventPacketInbound) {
//        if (event.packet is LevelSoundEvent2Packet) {
//            event.cancel()
//        }
//    }
}