package dev.sora.relay.cheat.module.impl

import com.nukkitx.protocol.bedrock.data.inventory.TransactionType
import com.nukkitx.protocol.bedrock.packet.InventoryTransactionPacket
import dev.sora.relay.cheat.module.CheatModule
import dev.sora.relay.game.event.EventPacketOutbound
import dev.sora.relay.game.event.Listen

class ModuleComboOneHitExploit : CheatModule("ComboOneHitExploit") {

    private val amountValue = intValue("Amount", 100, 50, 1000)

    @Listen
    fun onPacketOutbound(event: EventPacketOutbound) {
        val packet = event.packet

        if (packet is InventoryTransactionPacket && packet.transactionType == TransactionType.ITEM_USE_ON_ENTITY) {
            val netSession = event.session.netSession
            repeat(amountValue.get()) {
                netSession.outboundPacket(packet)
            }
        }
    }
}